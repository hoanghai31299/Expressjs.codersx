extends ../layouts/common
block content
    h1.pt-5 PRODUCTS LIST
        .d-flex
            form(class="form-group d-flex")
                button.btn.btn-info Click for fun
            form(action="/products/search", method = "GET",class="form-group d-flex m-auto")
                input(name = 'search_name',type = 'text',class="form-control mr-2")
                button(class="btn btn-light") Search
    if matchedCount
        .alert.alert-success=matchedCount+" Founded"
    .row.row-cols-3
         each product in products
            .col
                .card
                    img.card-img-top(src=product.image, alt='product image')
                    .card-body
                        h5.card-title=product.product_name
                        p.card-text(style="height:48px;white-space:wrap;overflow:hidden;text-overflow: ellipsis;")=product.description
                        .d-flex.justify-content-center
                            a.btn.btn-info(href='/cart/add/'+product.id) Add to cart
    nav.float-right.mt-3(aria-label='...')
        ul.pagination
            - var urlBegin = '/products?page='+pagination.previous
            - var urlNext = '/products?page='+pagination.next
            if pagination.previous == 0
                li.page-item.disabled
                    a.page-link(href=urlBegin, tabindex='-1', aria-disabled='true') Previous
            else
                li.page-item
                    a.page-link(href=urlBegin, tabindex='-1', aria-disabled='true') Previous
            each page in pagination.middle
                if page == pagination.page
                     li.page-item.active(aria-current='page')
                        a.page-link(href='/products?page='+page)=page
                        span.sr-only (current)
                else
                    li.page-item
                        a.page-link(href='/products?page='+page)=page
            li.page-item
                a.page-link(href=urlNext) Next
